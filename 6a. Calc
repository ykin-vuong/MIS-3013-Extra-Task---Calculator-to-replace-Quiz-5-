using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace P6_Calculator
{
    internal class Program
    {
        static void Main(string[] args)
        {
            string developerName, className, dateOfWriting;
            string userinput, answer;
            double result = 0;
            bool usePreviousResult = false;

            Console.WriteLine("Welcome to the Calculator Program\n" +
                "What is your first name?");
            developerName = Console.ReadLine();
            Console.WriteLine("What class are you writing this for?");
            className = Console.ReadLine();
            Console.WriteLine("What is the date of writing?");
            dateOfWriting = Console.ReadLine();

            DeveloperInfo(developerName, className, dateOfWriting);

            do
            {
                if (!usePreviousResult)
                {
                    Console.WriteLine("\nWhat math method would you like to do? (addition, subtraction, multiplication, division)");
                    userinput = Console.ReadLine().ToLower();

                    Console.WriteLine("What is your first number?");
                    double v1 = Convert.ToDouble(Console.ReadLine());
                    Console.WriteLine("What is your second number?");
                    double v2 = Convert.ToDouble(Console.ReadLine());

                    result = PerformCalculation(userinput, v1, v2);
                }
                else
                {
                    Console.WriteLine("\nWhat math method would you like to do? (addition, subtraction, multiplication, division)");
                    userinput = Console.ReadLine().ToLower();

                    Console.WriteLine("What is your next number?");
                    double v2 = Convert.ToDouble(Console.ReadLine());

                    result = PerformCalculation(userinput, result, v2);
                }

                Console.WriteLine($"Result: {result}");

                Console.WriteLine("Would you like to perform a new calculation, use the result of the previous calculation, or stop? (new/use/stop)");
                answer = Console.ReadLine().ToLower();

                if (answer == "new")
                {
                    usePreviousResult = false;
                }
                else if (answer == "use")
                {
                    usePreviousResult = true;
                }
                else if (answer == "stop")
                {
                    Console.WriteLine("Thank you for using the Calculator Program!");
                    break;
                }

            } while (true);

            Console.ReadKey();
        }



        static double PerformCalculation(string userinput, double v1, double v2)
        {
            switch (userinput[0])
            {
                case 'a':
                    return Add(v1, v2);
                case 's':
                    return Subtract(v1, v2);
                case 'm':
                    return Multiply(v1, v2);
                case 'd':
                    return Divide(v1, v2);
                default:
                    throw new InvalidOperationException("Invalid operation");
            }
        }
        static double Add(double v1, double v2)
        {
            return v1 + v2;
        }

        static double Subtract(double v1, double v2)
        {
            return v1 - v2;
        }

        static double Multiply(double v1, double v2)
        {
            return v1 * v2;
        }

        static double Divide(double v1, double v2)
        {
            return v1 / v2;
        }

        static void DeveloperInfo(string developerName, string className, string dateOfWriting)
        {
            Console.WriteLine($">> Note: {developerName} wrote this program for" +
                $" {className} on {dateOfWriting}\n");

        }
    }
}
